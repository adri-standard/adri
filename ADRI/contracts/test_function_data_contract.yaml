contracts:
  id: test_function_data_standard
  name: Test Function Data Standard
  version: 1.0.0
  authority: ADRI Framework
  description: Auto-generated standard for test_function_data data
record_identification:
  primary_key_fields:
  - customer_id
  strategy: primary_key_with_fallback
requirements:
  overall_minimum: 75.0
  field_requirements:
    customer_id:
      type: integer
      nullable: false
      min_value: -48.5
      max_value: 149.5
      validation_rules:
      - name: customer_id is required
        dimension: completeness
        severity: CRITICAL
        rule_type: not_null
        rule_expression: IS_NOT_NULL
        error_message: customer_id must not be empty
      - name: customer_id type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_INTEGER
        error_message: customer_id must be of type integer
      - name: customer_id numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= -48.5 AND VALUE <= 149.5
        error_message: customer_id must be between -48.5 and 149.5
    name:
      type: string
      nullable: true
      min_length: 0
      max_length: 1000
      validation_rules:
      - name: name type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: name must be of type string
      - name: name length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 0 AND LENGTH <= 1000
        error_message: name length must be between 0 and 1000
    email:
      type: string
      nullable: true
      min_length: 5
      max_length: 23
      validation_rules:
      - name: email type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: email must be of type string
      - name: email length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 5 AND LENGTH <= 23
        error_message: email length must be between 5 and 23
    age:
      type: integer
      nullable: true
      min_value: -12.75
      max_value: 150.0
      validation_rules:
      - name: age type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_INTEGER
        error_message: age must be of type integer
      - name: age numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= -12.75 AND VALUE <= 150.0
        error_message: age must be between -12.75 and 150.0
    salary:
      type: integer
      nullable: true
      min_value: -19383.625
      max_value: 204331.375
      validation_rules:
      - name: salary type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_INTEGER
        error_message: salary must be of type integer
      - name: salary numeric bounds
        dimension: validity
        severity: CRITICAL
        rule_type: numeric_bounds
        rule_expression: VALUE >= -19383.625 AND VALUE <= 204331.375
        error_message: salary must be between -19383.625 and 204331.375
    registration_date:
      type: date
      nullable: true
      after_date: '2022-12-31'
      before_date: '2023-12-30'
      validation_rules:
      - name: registration_date type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_DATE
        error_message: registration_date must be of type date
      - name: registration_date date bounds
        dimension: validity
        severity: CRITICAL
        rule_type: date_bounds
        rule_expression: DATE >= '2022-12-31' AND DATE <= '2023-12-30'
        error_message: registration_date must be within date range
    status:
      type: string
      nullable: true
      allowed_values:
        active:
          definition: active category
          precedence: 1
          derivation_rule:
            type: ordered_conditions
            inputs:
            - name
            - email
            - registration_date
            logic: 'TODO: Define conditions for ''active'''
            metadata:
              auto_generated: true
              confidence: placeholder
              note: Review and refine this rule based on business logic
        inactive:
          definition: inactive category
          precedence: 2
          derivation_rule:
            type: ordered_conditions
            inputs:
            - name
            - email
            - registration_date
            logic: 'TODO: Define conditions for ''inactive'''
            metadata:
              auto_generated: true
              confidence: placeholder
              note: Review and refine this rule based on business logic
        invalid_status:
          definition: 'invalid_status: Typically when name = ''Customer 4'' AND email
            = ''customer4@example.com'''
          precedence: 3
          derivation_rule:
            type: ordered_conditions
            inputs:
            - name
            - email
            - registration_date
            logic: IF name = 'Customer 4' AND email = 'customer4@example.com' THEN
              'invalid_status'
            metadata:
              auto_generated: true
              confidence: placeholder
              note: Review and refine this rule based on business logic
        pending:
          definition: pending category
          precedence: 4
          derivation_rule:
            type: ordered_conditions
            inputs:
            - name
            - email
            - registration_date
            logic: 'TODO: Define conditions for ''pending'''
            metadata:
              auto_generated: true
              confidence: placeholder
              note: Review and refine this rule based on business logic
        suspended:
          definition: suspended category
          precedence: 5
          derivation_rule:
            type: ordered_conditions
            inputs:
            - name
            - email
            - registration_date
            logic: 'TODO: Define conditions for ''suspended'''
            metadata:
              auto_generated: true
              confidence: placeholder
              note: Review and refine this rule based on business logic
      min_length: 6
      max_length: 14
      pattern: ^[A-Za-z0-9\-_]+$
      validation_rules:
      - name: status type validation
        dimension: validity
        severity: CRITICAL
        rule_type: type
        rule_expression: IS_STRING
        error_message: status must be of type string
      - name: status must be valid value
        dimension: validity
        severity: CRITICAL
        rule_type: allowed_values
        rule_expression: VALUE_IN(['pending', 'active', 'invalid_status', 'suspended',
          'inactive'])
        error_message: 'status must be one of: pending, active, invalid_status, suspended,
          inactive'
      - name: status length bounds
        dimension: validity
        severity: CRITICAL
        rule_type: length_bounds
        rule_expression: LENGTH >= 6 AND LENGTH <= 14
        error_message: status length must be between 6 and 14
      - name: status pattern validation
        dimension: validity
        severity: WARNING
        rule_type: pattern
        rule_expression: REGEX_MATCH('^[A-Za-z0-9\-_]+$')
        error_message: 'status must match pattern: ^[A-Za-z0-9\-_]+$'
      is_derived: true
      derivation_metadata:
        confidence: 0.9862842605535982
        input_fields:
        - name
        - email
        - registration_date
        auto_generated: true
        note: Review and refine derivation rules based on business logic
  dimension_requirements:
    validity:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          type: 0.4375
          numeric_bounds: 0.1875
          length_bounds: 0.1875
          date_bounds: 0.0625
          allowed_values: 0.0625
          pattern: 0.0625
        field_overrides: {}
    completeness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          missing_required: 0.5
          not_null: 0.5
        field_overrides: {}
    consistency:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights:
          primary_key_uniqueness: 0.3333333333333333
          format_consistency: 0.3333333333333333
          cross_field_logic: 0.3333333333333333
        field_overrides: {}
    freshness:
      minimum_score: 15.0
      weight: 1.0
      scoring:
        rule_weights:
          recency_window: 1.0
        field_overrides: {}
    plausibility:
      minimum_score: 12.0
      weight: 1.0
      scoring:
        rule_weights: {}
        field_overrides: {}
metadata:
  explanations_note: Explanations are for human review; only requirements.field_requirements
    are enforced.
  explanations_glossary:
    iqr: 'Interquartile Range (Q3 - Q1): a robust measure of spread, less sensitive
      to outliers.'
    q1: 25th percentile of the training values.
    q3: 75th percentile of the training values.
    coverage: Share of non-null training values that satisfy the rule.
    unique_count: Number of distinct non-null values observed in training.
    mad: 'Median Absolute Deviation: robust measure of variability around the median.'
    quantile: Statistical measure dividing data into equal-sized intervals.
    training_pass: Guarantee that generated rules pass on the training data used for
      generation.
    enum_strategy: Method used for allowed values inference (coverage or tolerant).
    margin_days: Buffer added to date ranges to allow for reasonable variations.
  explanations:
    customer_id:
      type: integer
      nullable:
        active: false
        reason: Required because 0% nulls observed in training
        stats:
          null_count: 0
          total: 100
      range:
        strategy: iqr
        active_min: -48.5
        active_max: 149.5
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 25.75
          q3: 75.25
          iqr_k: 1.5
          observed_min: -1.0
          observed_max: 100.0
    name:
      type: string
      nullable:
        active: true
        reason: Nulls were observed in training, so this field is allowed to be null
        stats:
          null_count: 4
          total: 100
      length_bounds:
        active_min: 0
        active_max: 1000
        stats:
          observed_min: 0
          observed_max: 1000
    email:
      type: string
      nullable:
        active: true
        reason: Nulls were observed in training, so this field is allowed to be null
        stats:
          null_count: 5
          total: 100
      length_bounds:
        active_min: 5
        active_max: 23
        stats:
          observed_min: 5
          observed_max: 23
    age:
      type: integer
      nullable:
        active: true
        reason: Nulls were observed in training, so this field is allowed to be null
        stats:
          null_count: 1
          total: 100
      range:
        strategy: iqr
        active_min: -12.75
        active_max: 150.0
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 31.5
          q3: 61.0
          iqr_k: 1.5
          observed_min: 0.0
          observed_max: 150.0
    salary:
      type: integer
      nullable:
        active: true
        reason: Nulls were observed in training, so this field is allowed to be null
        stats:
          null_count: 2
          total: 100
      range:
        strategy: iqr
        active_min: -19383.625
        active_max: 204331.375
        reason: Robust range (IQR/Quantile/MAD) clamped to training min/max for pass
          guarantee
        stats:
          q1: 64509.5
          q3: 120438.25
          iqr_k: 1.5
          observed_min: 0.0
          observed_max: 149892.0
    registration_date:
      type: date
      nullable:
        active: true
        reason: Nulls were observed in training, so this field is allowed to be null
        stats:
          null_count: 3
          total: 100
      date_bounds:
        active_after: '2022-12-31'
        active_before: '2023-12-30'
        reason: Plausible date window widened by margin days
        stats:
          observed_min: '2023-01-03'
          observed_max: '2023-12-27'
          margin_days: 3
    status:
      type: string
      nullable:
        active: true
        reason: Nulls were observed in training, so this field is allowed to be null
        stats:
          null_count: 1
          total: 100
      allowed_values:
        values:
        - active
        - inactive
        - invalid_status
        - pending
        - suspended
        reason: High coverage stable set
        stats:
          coverage: 1.0
          unique_count: 5
          strategy: coverage
      length_bounds:
        active_min: 6
        active_max: 14
        stats:
          observed_min: 6
          observed_max: 14
      pattern:
        regex: ^[A-Za-z0-9\-_]+$
        reason: 100% coverage on training non-nulls
        stats:
          coverage: 1.0
  freshness:
    as_of: '2023-12-28T00:00:00Z'
    window_days: 365
    date_field: registration_date
  plausibility_templates: '# plausibility:

    #   scoring:

    #     rule_weights:

    #       numeric_sigma: 1.0      # enable if not overlapping with validity numeric_bounds

    #       categorical_tail: 1.0   # enable to flag rare categories

    #   notes: "Disabled by default to avoid overlap with Validity. Review before
    enabling."

    '
